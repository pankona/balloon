<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="351px" preserveAspectRatio="none" style="width:546px;height:351px;" version="1.1" viewBox="0 0 546 351" width="546px" zoomAndPan="magnify"><defs><filter height="300%" id="f8lvflov5i08i" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f8lvflov5i08i)" height="255" style="stroke: #000000; stroke-width: 2.0;" width="522" x="13" y="67"/><rect fill="#FFFFFF" filter="url(#f8lvflov5i08i)" height="172" style="stroke: #000000; stroke-width: 2.0;" width="502" x="23" y="143"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="73" x2="73" y1="50" y2="339"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="181" x2="181" y1="50" y2="339"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="366" x2="366" y1="50" y2="339"/><rect fill="#FEFECE" filter="url(#f8lvflov5i08i)" height="42" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="33" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="40" y="22.3184">Main loop</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="47" y="36.3184">(Drive)</text><rect fill="#FEFECE" filter="url(#f8lvflov5i08i)" height="42" style="stroke: #A80036; stroke-width: 1.5;" width="49" x="155" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="162" y="22.3184">Event</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="162" y="36.3184">Queue</text><rect fill="#FEFECE" filter="url(#f8lvflov5i08i)" height="42" style="stroke: #A80036; stroke-width: 1.5;" width="91" x="319" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="347" y="22.3184">Event</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="326" y="36.3184">Subscribers</text><path d="M13,67 L90,67 L90,72 L80,82 L13,82 L13,67 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="255" style="stroke: #000000; stroke-width: 2.0;" width="522" x="13" y="67"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="28" y="79.4385">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="105" y="78.6787">[while game scene]</text><polygon fill="#A80036" points="169.5,97,179.5,101,169.5,105,173.5,101" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="73.5" x2="175.5" y1="101" y2="101"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="80.5" y="97.4385">fetch events</text><polygon fill="#A80036" points="84.5,124,74.5,128,84.5,132,80.5,128" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="78.5" x2="180.5" y1="128" y2="128"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="90.5" y="124.4385">events</text><path d="M23,143 L100,143 L100,148 L90,158 L23,158 L23,143 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="172" style="stroke: #000000; stroke-width: 2.0;" width="502" x="23" y="143"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="38" y="155.4385">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="78" x="115" y="154.6787">[len(events)]</text><polygon fill="#A80036" points="354.5,173,364.5,177,354.5,181,358.5,177" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="73.5" x2="360.5" y1="177" y2="177"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="80.5" y="173.4385">fire events</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="366.5" x2="408.5" y1="204" y2="204"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="408.5" x2="408.5" y1="204" y2="217"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="367.5" x2="408.5" y1="217" y2="217"/><polygon fill="#A80036" points="377.5,213,367.5,217,377.5,221,373.5,217" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="373.5" y="200.4385">do something</text><path d="M371,230 L371,279 L511,279 L511,240 L501,230 L371,230 " fill="#FBFB77" filter="url(#f8lvflov5i08i)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M501,230 L501,240 L511,240 L501,230 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="377" y="246.4385">each events may</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="377" y="259.4385">push new event to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="377" y="272.4385">event queue</text><polygon fill="#A80036" points="192.5,303,182.5,307,192.5,311,188.5,307" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="186.5" x2="365.5" y1="307" y2="307"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="198.5" y="303.4385">(may push a new events)</text><!--
@startuml

hide footbox

participant "Main loop\n(Drive)" as main
participant "Event\nQueue"       as eq
participant "Event\nSubscribers" as es

loop while game scene
  main -> eq : fetch events
  main <- eq : events

  loop len(events)
    main -> es : fire events
    es -> es : do something
    note right of es : each events may\npush new event to\nevent queue
    eq <- es : (may push a new events)
  end
end

@enduml

PlantUML version 1.2018.02(Sat Mar 10 02:20:44 JST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_162-b12
Operating System: Linux
OS Version: 4.12.14-1-MANJARO
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>